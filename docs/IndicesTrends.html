<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 6 Estimating Annual Indices and Trends | A Quick Introduction to bbsBayes</title>
  <meta name="description" content="This is a document to support a ~2hr workshop." />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 6 Estimating Annual Indices and Trends | A Quick Introduction to bbsBayes" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This is a document to support a ~2hr workshop." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 6 Estimating Annual Indices and Trends | A Quick Introduction to bbsBayes" />
  
  <meta name="twitter:description" content="This is a document to support a ~2hr workshop." />
  

<meta name="author" content="Adam C. Smith, and Brandon P.M. Edwards" />


<meta name="date" content="2020-12-14" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="ModelRun.html"/>
<link rel="next" href="GraphMap.html"/>
<script src="libs/header-attrs-2.4.4/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<link href="libs/anchor-sections-1.0/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">A Quick Introduction to bbsBayes</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Customized BBS trends, trajectories, graphs, and maps using the bbsBayes R-package, an Introduction</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#what-is-the-workshop-about"><i class="fa fa-check"></i><b>1.1</b> What is the workshop about?</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#intended-audience"><i class="fa fa-check"></i><b>1.2</b> Intended Audience</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#what-we-hope-you-will-learn-here"><i class="fa fa-check"></i><b>1.3</b> What we hope you will learn here</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="Intro.html"><a href="Intro.html"><i class="fa fa-check"></i><b>2</b> Preparation and Installation</a>
<ul>
<li class="chapter" data-level="2.1" data-path="Intro.html"><a href="Intro.html#pre-workshop-preparation"><i class="fa fa-check"></i><b>2.1</b> Pre-Workshop preparation</a></li>
<li class="chapter" data-level="2.2" data-path="Intro.html"><a href="Intro.html#installation"><i class="fa fa-check"></i><b>2.2</b> Installation</a></li>
<li class="chapter" data-level="2.3" data-path="Intro.html"><a href="Intro.html#data-retrieval"><i class="fa fa-check"></i><b>2.3</b> Data Retrieval</a></li>
<li class="chapter" data-level="2.4" data-path="Intro.html"><a href="Intro.html#install-jags"><i class="fa fa-check"></i><b>2.4</b> Install JAGS</a></li>
<li class="chapter" data-level="2.5" data-path="Intro.html"><a href="Intro.html#example-data-for-scarlet-tanager"><i class="fa fa-check"></i><b>2.5</b> Example data for Scarlet Tanager</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="Stratify.html"><a href="Stratify.html"><i class="fa fa-check"></i><b>3</b> Stratification</a>
<ul>
<li class="chapter" data-level="3.1" data-path="Stratify.html"><a href="Stratify.html#strata"><i class="fa fa-check"></i><b>3.1</b> Strata</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="Stratify.html"><a href="Stratify.html#useful-code-to-access-and-print-the-strata-maps-above"><i class="fa fa-check"></i><b>3.1.1</b> Useful code to access and print the strata maps above</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="DataPrep.html"><a href="DataPrep.html"><i class="fa fa-check"></i><b>4</b> Prepare the data for a model and species</a>
<ul>
<li class="chapter" data-level="4.1" data-path="DataPrep.html"><a href="DataPrep.html#prepare-data"><i class="fa fa-check"></i><b>4.1</b> Prepare data</a></li>
<li class="chapter" data-level="4.2" data-path="DataPrep.html"><a href="DataPrep.html#models"><i class="fa fa-check"></i><b>4.2</b> Models</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="DataPrep.html"><a href="DataPrep.html#slope"><i class="fa fa-check"></i><b>4.2.1</b> slope</a></li>
<li class="chapter" data-level="4.2.2" data-path="DataPrep.html"><a href="DataPrep.html#gam"><i class="fa fa-check"></i><b>4.2.2</b> gam</a></li>
<li class="chapter" data-level="4.2.3" data-path="DataPrep.html"><a href="DataPrep.html#gamye"><i class="fa fa-check"></i><b>4.2.3</b> gamye</a></li>
<li class="chapter" data-level="4.2.4" data-path="DataPrep.html"><a href="DataPrep.html#firstdiff"><i class="fa fa-check"></i><b>4.2.4</b> firstdiff</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="DataPrep.html"><a href="DataPrep.html#cws-analysis-example"><i class="fa fa-check"></i><b>4.3</b> CWS analysis example</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="ModelRun.html"><a href="ModelRun.html"><i class="fa fa-check"></i><b>5</b> Running the model</a>
<ul>
<li class="chapter" data-level="5.1" data-path="ModelRun.html"><a href="ModelRun.html#pacfic-wren-example"><i class="fa fa-check"></i><b>5.1</b> Pacfic Wren example</a></li>
<li class="chapter" data-level="5.2" data-path="ModelRun.html"><a href="ModelRun.html#convergence-of-the-mcmc"><i class="fa fa-check"></i><b>5.2</b> Convergence of the MCMC</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="IndicesTrends.html"><a href="IndicesTrends.html"><i class="fa fa-check"></i><b>6</b> Estimating Annual Indices and Trends</a>
<ul>
<li class="chapter" data-level="6.1" data-path="IndicesTrends.html"><a href="IndicesTrends.html#annual-indices"><i class="fa fa-check"></i><b>6.1</b> Annual Indices</a></li>
<li class="chapter" data-level="6.2" data-path="IndicesTrends.html"><a href="IndicesTrends.html#population-trends"><i class="fa fa-check"></i><b>6.2</b> Population Trends</a></li>
<li class="chapter" data-level="6.3" data-path="IndicesTrends.html"><a href="IndicesTrends.html#alternative-time-spans-for-trends"><i class="fa fa-check"></i><b>6.3</b> Alternative time-spans for trends</a></li>
<li class="chapter" data-level="6.4" data-path="IndicesTrends.html"><a href="IndicesTrends.html#alternative-definitions-of-trends"><i class="fa fa-check"></i><b>6.4</b> Alternative definitions of trends</a>
<ul>
<li class="chapter" data-level="6.4.1" data-path="IndicesTrends.html"><a href="IndicesTrends.html#percent-change-and-probability-of-change"><i class="fa fa-check"></i><b>6.4.1</b> Percent Change and probability of change</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="GraphMap.html"><a href="GraphMap.html"><i class="fa fa-check"></i><b>7</b> Trajectory graphs and trend maps</a>
<ul>
<li class="chapter" data-level="7.1" data-path="GraphMap.html"><a href="GraphMap.html#graphing-the-trajectories-annual-indices"><i class="fa fa-check"></i><b>7.1</b> Graphing the trajectories (annual indices)</a></li>
<li class="chapter" data-level="7.2" data-path="GraphMap.html"><a href="GraphMap.html#mapping-the-trends"><i class="fa fa-check"></i><b>7.2</b> Mapping the trends</a></li>
<li class="chapter" data-level="7.3" data-path="GraphMap.html"><a href="GraphMap.html#geofacet-trajectories"><i class="fa fa-check"></i><b>7.3</b> Geofacet Trajectories</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="Adv.html"><a href="Adv.html"><i class="fa fa-check"></i><b>8</b> Advanced options</a>
<ul>
<li class="chapter" data-level="8.1" data-path="Adv.html"><a href="Adv.html#custom-regional-summaries"><i class="fa fa-check"></i><b>8.1</b> Custom regional summaries</a>
<ul>
<li class="chapter" data-level="8.1.1" data-path="Adv.html"><a href="Adv.html#define-the-custom-regions-as-a-collection-of-the-existing-strata."><i class="fa fa-check"></i><b>8.1.1</b> Define the custom regions as a collection of the existing strata.</a></li>
<li class="chapter" data-level="8.1.2" data-path="Adv.html"><a href="Adv.html#use-defined-regions-to-estimate-indices-and-trends"><i class="fa fa-check"></i><b>8.1.2</b> Use defined regions to estimate indices and trends</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="Adv.html"><a href="Adv.html#exporting-the-jags-model"><i class="fa fa-check"></i><b>8.2</b> Exporting the JAGS model</a></li>
<li class="chapter" data-level="8.3" data-path="Adv.html"><a href="Adv.html#customizing-the-jags-model-and-data"><i class="fa fa-check"></i><b>8.3</b> Customizing the JAGS model and data</a></li>
<li class="chapter" data-level="8.4" data-path="Adv.html"><a href="Adv.html#comparing-models"><i class="fa fa-check"></i><b>8.4</b> Comparing Models</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="Ref.html"><a href="Ref.html"><i class="fa fa-check"></i><b>9</b> References</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">A Quick Introduction to bbsBayes</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="IndicesTrends" class="section level1" number="6">
<h1><span class="header-section-number">Chapter 6</span> Estimating Annual Indices and Trends</h1>
<p>Once the model has finished running, we can use the saved output to calculate the population trajectories and trends. As an example, we’ll load some saved model output for Scarlet Tanager, from the gamye model. If you haven’t already, you can download the model output file <a href="https://drive.google.com/file/d/1LCZrl0W0AEbXj8_MyUP-CXX3a-j77rFN/view?usp=sharing">here</a>, then save it into your working directory.</p>
<p>This saved workspace includes two objects:</p>
<ol style="list-style-type: decimal">
<li><p>jags_data - the data object created with the <code>prepare_jags_data()</code> function.</p></li>
<li><p>jags_mod - the model output created with the <code>run_model()</code> function.</p></li>
</ol>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="IndicesTrends.html#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="fu">load</span>(<span class="st">&quot;jags_mod_full.RData&quot;</span>)</span></code></pre></div>
<div id="annual-indices" class="section level2" number="6.1">
<h2><span class="header-section-number">6.1</span> Annual Indices</h2>
<p>The annual indices of relative abundance (“annual indices”) from all of the bbsBayes models represent the expected mean count on the BBS routes in a given region and year. The time-series of these annual indices in a given region make up the estimated population trajectory.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="IndicesTrends.html#cb18-1" aria-hidden="true" tabindex="-1"></a>indices <span class="ot">&lt;-</span> <span class="fu">generate_indices</span>(<span class="at">jags_mod =</span> jags_mod,</span>
<span id="cb18-2"><a href="IndicesTrends.html#cb18-2" aria-hidden="true" tabindex="-1"></a>                            <span class="at">jags_data =</span> jags_data)</span>
<span id="cb18-3"><a href="IndicesTrends.html#cb18-3" aria-hidden="true" tabindex="-1"></a><span class="do">## Note: this function can take ~20 minutes to run for a species with a broad range (many strata) and if the model run included a long time-series (many years).</span></span></code></pre></div>
<p>By default, this function generates estimates for the continent (i.e., survey-wide) and for the individual strata. However, if using one of the two BBS stratifications “bbs_usgs” or “bbs_cws,” the user can also select summaries for composite regions (regions made up of collections of strata), such as countries, provinces/states, Bird Conservation Regions, etc.</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="IndicesTrends.html#cb19-1" aria-hidden="true" tabindex="-1"></a>indices <span class="ot">&lt;-</span> <span class="fu">generate_indices</span>(<span class="at">jags_mod =</span> jags_mod,</span>
<span id="cb19-2"><a href="IndicesTrends.html#cb19-2" aria-hidden="true" tabindex="-1"></a>                            <span class="at">jags_data =</span> jags_data,</span>
<span id="cb19-3"><a href="IndicesTrends.html#cb19-3" aria-hidden="true" tabindex="-1"></a>                            <span class="at">regions =</span> <span class="fu">c</span>(<span class="st">&quot;continental&quot;</span>,</span>
<span id="cb19-4"><a href="IndicesTrends.html#cb19-4" aria-hidden="true" tabindex="-1"></a>                            <span class="st">&quot;national&quot;</span>,</span>
<span id="cb19-5"><a href="IndicesTrends.html#cb19-5" aria-hidden="true" tabindex="-1"></a>                            <span class="st">&quot;prov_state&quot;</span>,</span>
<span id="cb19-6"><a href="IndicesTrends.html#cb19-6" aria-hidden="true" tabindex="-1"></a>                            <span class="st">&quot;stratum&quot;</span>))</span>
<span id="cb19-7"><a href="IndicesTrends.html#cb19-7" aria-hidden="true" tabindex="-1"></a>                            <span class="co">#also &quot;bcr&quot;, #BCR specific estimates</span></span>
<span id="cb19-8"><a href="IndicesTrends.html#cb19-8" aria-hidden="true" tabindex="-1"></a>                            <span class="co"># &quot;bcr_by_country&quot; #e.g., splits the BCRs along the national borders</span></span></code></pre></div>
<p>The <code>generate_indices()</code> function creates a list that includes an object called data_summary, which is a dataframe with all of the estimated annual indices <code>indices$data_summary</code>.</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="IndicesTrends.html#cb20-1" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">kable</span>(<span class="fu">head</span>(indices<span class="sc">$</span>data_summary[,<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">4</span>,<span class="dv">7</span>,<span class="dv">8</span>,<span class="dv">13</span>,<span class="dv">14</span>,<span class="dv">15</span>,<span class="dv">16</span>)]))</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="right">Year</th>
<th align="left">Region</th>
<th align="left">Region_type</th>
<th align="right">Index</th>
<th align="right">Index_q_0.025</th>
<th align="right">Index_q_0.975</th>
<th align="right">obs_mean</th>
<th align="right">nrts</th>
<th align="right">nnzero</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">1966</td>
<td align="left">Continental</td>
<td align="left">continental</td>
<td align="right">1.06</td>
<td align="right">0.957</td>
<td align="right">1.19</td>
<td align="right">0.675</td>
<td align="right">325</td>
<td align="right">173</td>
</tr>
<tr class="even">
<td align="right">1967</td>
<td align="left">Continental</td>
<td align="left">continental</td>
<td align="right">1.02</td>
<td align="right">0.930</td>
<td align="right">1.12</td>
<td align="right">0.677</td>
<td align="right">546</td>
<td align="right">277</td>
</tr>
<tr class="odd">
<td align="right">1968</td>
<td align="left">Continental</td>
<td align="left">continental</td>
<td align="right">1.04</td>
<td align="right">0.964</td>
<td align="right">1.13</td>
<td align="right">0.797</td>
<td align="right">516</td>
<td align="right">270</td>
</tr>
<tr class="even">
<td align="right">1969</td>
<td align="left">Continental</td>
<td align="left">continental</td>
<td align="right">1.04</td>
<td align="right">0.972</td>
<td align="right">1.12</td>
<td align="right">0.877</td>
<td align="right">692</td>
<td align="right">352</td>
</tr>
<tr class="odd">
<td align="right">1970</td>
<td align="left">Continental</td>
<td align="left">continental</td>
<td align="right">1.03</td>
<td align="right">0.966</td>
<td align="right">1.10</td>
<td align="right">0.826</td>
<td align="right">733</td>
<td align="right">387</td>
</tr>
<tr class="even">
<td align="right">1971</td>
<td align="left">Continental</td>
<td align="left">continental</td>
<td align="right">1.06</td>
<td align="right">1.007</td>
<td align="right">1.14</td>
<td align="right">0.974</td>
<td align="right">779</td>
<td align="right">404</td>
</tr>
</tbody>
</table>
<p>For example, one may wish to export the annual indices to a text file that can be read using Microsoft Excel.</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="IndicesTrends.html#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(indices<span class="sc">$</span>data_summary, <span class="st">&quot;Scarlet_Tanager_trajectories.csv&quot;</span>)</span></code></pre></div>
<p>The list also includes a number of other objects that retain the stratification information, strata area weights, and the full posterior samples for every estimated annual index. Generally these other objects are only used by subsequent functions and the user won’t access them directly.</p>
<p>The function also accepts the alternative annual indices, such as the smooth-only indices from the gamye model.</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="IndicesTrends.html#cb22-1" aria-hidden="true" tabindex="-1"></a>indices_smooth <span class="ot">&lt;-</span> <span class="fu">generate_indices</span>(<span class="at">jags_mod =</span> jags_mod,</span>
<span id="cb22-2"><a href="IndicesTrends.html#cb22-2" aria-hidden="true" tabindex="-1"></a>                            <span class="at">jags_data =</span> jags_data,</span>
<span id="cb22-3"><a href="IndicesTrends.html#cb22-3" aria-hidden="true" tabindex="-1"></a>                            <span class="at">alternate_n =</span> <span class="st">&quot;n3&quot;</span>,</span>
<span id="cb22-4"><a href="IndicesTrends.html#cb22-4" aria-hidden="true" tabindex="-1"></a>                            <span class="at">regions =</span> <span class="fu">c</span>(<span class="st">&quot;continental&quot;</span>,</span>
<span id="cb22-5"><a href="IndicesTrends.html#cb22-5" aria-hidden="true" tabindex="-1"></a>                            <span class="st">&quot;national&quot;</span>,</span>
<span id="cb22-6"><a href="IndicesTrends.html#cb22-6" aria-hidden="true" tabindex="-1"></a>                            <span class="st">&quot;prov_state&quot;</span>,</span>
<span id="cb22-7"><a href="IndicesTrends.html#cb22-7" aria-hidden="true" tabindex="-1"></a>                            <span class="st">&quot;stratum&quot;</span>))</span>
<span id="cb22-8"><a href="IndicesTrends.html#cb22-8" aria-hidden="true" tabindex="-1"></a>                            <span class="co">#also &quot;bcr&quot;, #BCR specific estimates</span></span>
<span id="cb22-9"><a href="IndicesTrends.html#cb22-9" aria-hidden="true" tabindex="-1"></a>                            <span class="co"># &quot;bcr_by_country&quot; #e.g., splits the BCRs along the national borders</span></span></code></pre></div>
</div>
<div id="population-trends" class="section level2" number="6.2">
<h2><span class="header-section-number">6.2</span> Population Trends</h2>
<p>Population trends can be calculated from the output of <code>generate_indices()</code>. The trends are expressed as geometric mean rates of change (%/year) between two points in time. <span class="math inline">\(Trend = (\frac {n[Minyear]}{n[Maxyear]})^{(1/(Maxyear-Minyear))}\)</span></p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="IndicesTrends.html#cb23-1" aria-hidden="true" tabindex="-1"></a>trends <span class="ot">&lt;-</span> <span class="fu">generate_trends</span>(<span class="at">indices =</span> indices,</span>
<span id="cb23-2"><a href="IndicesTrends.html#cb23-2" aria-hidden="true" tabindex="-1"></a>                          <span class="at">Min_year =</span> <span class="dv">1970</span>,</span>
<span id="cb23-3"><a href="IndicesTrends.html#cb23-3" aria-hidden="true" tabindex="-1"></a>                          <span class="at">Max_year =</span> <span class="dv">2019</span>)</span></code></pre></div>
<p>The <code>generate_trends()</code> function returns a dataframe with 1 row for each unit of the region-types requested (i.e., 1 row for each stratum, 1 continental, etc.). The dataframe has at least 27 columns that report useful information related to each trend, including the start and end year of the trend, lists of included strata, total number of routes, number of strata, mean observed counts, and estimates of the % change in the population between the start and end years.</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="IndicesTrends.html#cb24-1" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">kable</span>(<span class="fu">head</span>(trends[,<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">3</span>,<span class="dv">8</span>,<span class="dv">9</span>,<span class="dv">14</span>)]))</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="right">Start_year</th>
<th align="left">Region</th>
<th align="right">Trend</th>
<th align="right">Trend_Q0.025</th>
<th align="right">Trend_Q0.975</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">1970</td>
<td align="left">Continental</td>
<td align="right">0.041</td>
<td align="right">-0.141</td>
<td align="right">0.222</td>
</tr>
<tr class="even">
<td align="right">1970</td>
<td align="left">CA</td>
<td align="right">-0.439</td>
<td align="right">-1.090</td>
<td align="right">0.171</td>
</tr>
<tr class="odd">
<td align="right">1970</td>
<td align="left">US</td>
<td align="right">0.097</td>
<td align="right">-0.090</td>
<td align="right">0.288</td>
</tr>
<tr class="even">
<td align="right">1970</td>
<td align="left">AL</td>
<td align="right">1.956</td>
<td align="right">0.797</td>
<td align="right">3.102</td>
</tr>
<tr class="odd">
<td align="right">1970</td>
<td align="left">AR</td>
<td align="right">0.306</td>
<td align="right">-0.684</td>
<td align="right">1.335</td>
</tr>
<tr class="even">
<td align="right">1970</td>
<td align="left">CT</td>
<td align="right">-0.580</td>
<td align="right">-1.633</td>
<td align="right">0.432</td>
</tr>
</tbody>
</table>
<p>The <code>generate_trends</code> function includes some other arguments that allow the user to adjust the quantiles used to summarize uncertainty (e.g., interquartile range of the trend estiamtes, or the 67% CIs), as well as include additional calculations, such as the probability a population has declined (or increased) by &gt; X%.</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="IndicesTrends.html#cb25-1" aria-hidden="true" tabindex="-1"></a>trends <span class="ot">&lt;-</span> <span class="fu">generate_trends</span>(<span class="at">indices =</span> indices,</span>
<span id="cb25-2"><a href="IndicesTrends.html#cb25-2" aria-hidden="true" tabindex="-1"></a>                          <span class="at">Min_year =</span> <span class="dv">2009</span>,</span>
<span id="cb25-3"><a href="IndicesTrends.html#cb25-3" aria-hidden="true" tabindex="-1"></a>                          <span class="at">Max_year =</span> <span class="dv">2019</span>,</span>
<span id="cb25-4"><a href="IndicesTrends.html#cb25-4" aria-hidden="true" tabindex="-1"></a>                          <span class="at">prob_decrease =</span> <span class="fu">c</span>(<span class="dv">30</span>,<span class="dv">50</span>),</span>
<span id="cb25-5"><a href="IndicesTrends.html#cb25-5" aria-hidden="true" tabindex="-1"></a>                          <span class="at">prob_increase =</span> <span class="fu">c</span>(<span class="dv">0</span>))</span></code></pre></div>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="IndicesTrends.html#cb26-1" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">kable</span>(<span class="fu">head</span>(trends[,<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">4</span>,<span class="dv">8</span>,<span class="dv">15</span>,<span class="dv">22</span>)]))</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="right">Start_year</th>
<th align="left">Region_alt</th>
<th align="right">Trend</th>
<th align="right">Percent_Change</th>
<th align="right">prob_decrease_30_percent</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">2009</td>
<td align="left">Continental</td>
<td align="right">-0.816</td>
<td align="right">-7.87</td>
<td align="right">0.000</td>
</tr>
<tr class="even">
<td align="right">2009</td>
<td align="left">Canada</td>
<td align="right">-0.114</td>
<td align="right">-1.13</td>
<td align="right">0.001</td>
</tr>
<tr class="odd">
<td align="right">2009</td>
<td align="left">United States of America</td>
<td align="right">-0.884</td>
<td align="right">-8.49</td>
<td align="right">0.000</td>
</tr>
<tr class="even">
<td align="right">2009</td>
<td align="left">ALABAMA</td>
<td align="right">-1.121</td>
<td align="right">-10.66</td>
<td align="right">0.046</td>
</tr>
<tr class="odd">
<td align="right">2009</td>
<td align="left">ARKANSAS</td>
<td align="right">0.631</td>
<td align="right">6.49</td>
<td align="right">0.010</td>
</tr>
<tr class="even">
<td align="right">2009</td>
<td align="left">CONNECTICUT</td>
<td align="right">-2.625</td>
<td align="right">-23.35</td>
<td align="right">0.335</td>
</tr>
</tbody>
</table>
<p>And trends calculated from the smooth component only can be derived from the related annual indices.</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="IndicesTrends.html#cb27-1" aria-hidden="true" tabindex="-1"></a>trends_smooth <span class="ot">&lt;-</span> <span class="fu">generate_trends</span>(<span class="at">indices =</span> indices_smooth,</span>
<span id="cb27-2"><a href="IndicesTrends.html#cb27-2" aria-hidden="true" tabindex="-1"></a>                          <span class="at">Min_year =</span> <span class="dv">2009</span>,</span>
<span id="cb27-3"><a href="IndicesTrends.html#cb27-3" aria-hidden="true" tabindex="-1"></a>                          <span class="at">Max_year =</span> <span class="dv">2019</span>,</span>
<span id="cb27-4"><a href="IndicesTrends.html#cb27-4" aria-hidden="true" tabindex="-1"></a>                          <span class="at">prob_decrease =</span> <span class="fu">c</span>(<span class="dv">30</span>,<span class="dv">50</span>),</span>
<span id="cb27-5"><a href="IndicesTrends.html#cb27-5" aria-hidden="true" tabindex="-1"></a>                          <span class="at">prob_increase =</span> <span class="fu">c</span>(<span class="dv">0</span>))</span></code></pre></div>
</div>
<div id="alternative-time-spans-for-trends" class="section level2" number="6.3">
<h2><span class="header-section-number">6.3</span> Alternative time-spans for trends</h2>
<p>It is simple to estimate trends for alternative intervals of time. For example, calculating a 15 year trend for Scarlet Tanager.</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="IndicesTrends.html#cb28-1" aria-hidden="true" tabindex="-1"></a>trends_smooth_15 <span class="ot">&lt;-</span> <span class="fu">generate_trends</span>(<span class="at">indices =</span> indices_smooth,</span>
<span id="cb28-2"><a href="IndicesTrends.html#cb28-2" aria-hidden="true" tabindex="-1"></a>                          <span class="at">Min_year =</span> (<span class="dv">2019-15</span>),</span>
<span id="cb28-3"><a href="IndicesTrends.html#cb28-3" aria-hidden="true" tabindex="-1"></a>                          <span class="at">Max_year =</span> <span class="dv">2019</span>,</span>
<span id="cb28-4"><a href="IndicesTrends.html#cb28-4" aria-hidden="true" tabindex="-1"></a>                          <span class="at">prob_decrease =</span> <span class="fu">c</span>(<span class="dv">30</span>,<span class="dv">50</span>),</span>
<span id="cb28-5"><a href="IndicesTrends.html#cb28-5" aria-hidden="true" tabindex="-1"></a>                          <span class="at">prob_increase =</span> <span class="fu">c</span>(<span class="dv">0</span>)) </span></code></pre></div>
<p>Or, a 15-year trend for the previous 15 years, i.e., the interval from 1989-2004:</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="IndicesTrends.html#cb29-1" aria-hidden="true" tabindex="-1"></a>trends_smooth_15alt <span class="ot">&lt;-</span> <span class="fu">generate_trends</span>(<span class="at">indices =</span> indices_smooth,</span>
<span id="cb29-2"><a href="IndicesTrends.html#cb29-2" aria-hidden="true" tabindex="-1"></a>                          <span class="at">Min_year =</span> <span class="dv">1989</span>,</span>
<span id="cb29-3"><a href="IndicesTrends.html#cb29-3" aria-hidden="true" tabindex="-1"></a>                          <span class="at">Max_year =</span> <span class="dv">2004</span>,</span>
<span id="cb29-4"><a href="IndicesTrends.html#cb29-4" aria-hidden="true" tabindex="-1"></a>                          <span class="at">prob_decrease =</span> <span class="fu">c</span>(<span class="dv">30</span>,<span class="dv">50</span>),</span>
<span id="cb29-5"><a href="IndicesTrends.html#cb29-5" aria-hidden="true" tabindex="-1"></a>                          <span class="at">prob_increase =</span> <span class="fu">c</span>(<span class="dv">0</span>))</span></code></pre></div>
</div>
<div id="alternative-definitions-of-trends" class="section level2" number="6.4">
<h2><span class="header-section-number">6.4</span> Alternative definitions of trends</h2>
<p>The end-point trend definition introduced by <span class="citation">(<a href="Ref.html#ref-link2002a" role="doc-biblioref">Link and Sauer 2002b</a>)</span> is only one possible metric to measure a population trend. The default trend calculation is an interval-specific estimate of the geometric mean annual change in the population. <span class="math inline">\(Trend = (\frac {n[Minyear]}{n[Maxyear]})^{(1/(Maxyear-Minyear))}\)</span> It relies on a comparison of the annual indices in the first and last years of the trend period to quantify the mean rate of population change. However, it ignores the pattern of change between the two end-points.</p>
<p>The user can choose an alternative estimate of change that is calculated by fitting a log-linear slope to the series of all annual indices between the two end-points (e.g., all 11 years in a 10-year trend from 2008-2018). The slope of this line could be expressed as an average annual percent change across the time-period of interest. If working with estimates derived from a model with strong annual fluctuations and for which no decomposition is possible (e.g., “firstdiff” model), this slope-based trend may be a more comprehensive measure of the average population change, that is less dependent on the particular end-point years. These slope trends can be added to the trend output table by setting the <code>slope = TRUE</code> argument in <code>generate_trends()</code>. The standard trends are still calculated, but additional columns are added that include the alternate estimates. NOTE: the <code>generate_map()</code> function can map slope trends as well with the same <code>slope = TRUE</code> argument.</p>
<p>For example, we could use the full annual indices from the gamye model (indices including the annual fluctuations) to calculate both the default end-point trends and the alternative slope trends.</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="IndicesTrends.html#cb30-1" aria-hidden="true" tabindex="-1"></a>trends_15_slope <span class="ot">&lt;-</span> <span class="fu">generate_trends</span>(<span class="at">indices =</span> indices,</span>
<span id="cb30-2"><a href="IndicesTrends.html#cb30-2" aria-hidden="true" tabindex="-1"></a>                          <span class="at">Min_year =</span> (<span class="dv">2019-15</span>),</span>
<span id="cb30-3"><a href="IndicesTrends.html#cb30-3" aria-hidden="true" tabindex="-1"></a>                          <span class="at">slope =</span> <span class="cn">TRUE</span>,</span>
<span id="cb30-4"><a href="IndicesTrends.html#cb30-4" aria-hidden="true" tabindex="-1"></a>                          <span class="at">Max_year =</span> <span class="dv">2019</span>,</span>
<span id="cb30-5"><a href="IndicesTrends.html#cb30-5" aria-hidden="true" tabindex="-1"></a>                          <span class="at">prob_decrease =</span> <span class="fu">c</span>(<span class="dv">30</span>,<span class="dv">50</span>),</span>
<span id="cb30-6"><a href="IndicesTrends.html#cb30-6" aria-hidden="true" tabindex="-1"></a>                          <span class="at">prob_increase =</span> <span class="fu">c</span>(<span class="dv">0</span>))</span></code></pre></div>
<p>Setting <code>slope = TRUE</code> adds the slope-trend calculation to the output dataframe. Note: The probabilities of decrease and increase values are not based on the slope metric, they are always a function of the difference in population between the start and end of the time-interval.</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="IndicesTrends.html#cb31-1" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">kable</span>(<span class="fu">head</span>(trends_15_slope[,<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">4</span>,<span class="dv">8</span>,<span class="dv">22</span>)]))</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="right">Start_year</th>
<th align="left">Region_alt</th>
<th align="right">Trend</th>
<th align="right">Slope_Trend</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">2004</td>
<td align="left">Continental</td>
<td align="right">-0.793</td>
<td align="right">-1.040</td>
</tr>
<tr class="even">
<td align="right">2004</td>
<td align="left">Canada</td>
<td align="right">-0.004</td>
<td align="right">-0.218</td>
</tr>
<tr class="odd">
<td align="right">2004</td>
<td align="left">United States of America</td>
<td align="right">-0.866</td>
<td align="right">-1.115</td>
</tr>
<tr class="even">
<td align="right">2004</td>
<td align="left">ALABAMA</td>
<td align="right">-0.521</td>
<td align="right">-0.728</td>
</tr>
<tr class="odd">
<td align="right">2004</td>
<td align="left">ARKANSAS</td>
<td align="right">0.769</td>
<td align="right">0.328</td>
</tr>
<tr class="even">
<td align="right">2004</td>
<td align="left">CONNECTICUT</td>
<td align="right">-1.956</td>
<td align="right">-2.186</td>
</tr>
</tbody>
</table>
<div id="percent-change-and-probability-of-change" class="section level3" number="6.4.1">
<h3><span class="header-section-number">6.4.1</span> Percent Change and probability of change</h3>
<p>The <code>generate_trends()</code> function also produces estimates of the overall percent-change in the population between the first and last years of the trend-period. This calculation is often easier to interpret than an average annual rate of change. These percent change estimates have associated uncertainty bounds, and so can be helpful for deriving statements such as “between 2008 and 2018, the population has declined by 20 percent, but that estimate is relatively uncertain and the true decline may be as little as 2 percent or as much as 50 percent”</p>
<p>In addition, the function can optionally calculate the posterior conditional probability that a population has changed by at least a certain amount, using the <code>prob_decrease</code> and <code>prob_increase</code> arguments. These values can be useful for deriving statements such as “our model suggests that there is a 95% probability that the species has increased (i.e., &gt; 0% increase) and a 45 percent probability that the species has increased more than 2-fold (i.e., &gt; 100% increase)”</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="IndicesTrends.html#cb32-1" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">kable</span>(<span class="fu">head</span>(trends_smooth_15[,<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">4</span>,<span class="dv">8</span>,<span class="dv">15</span>,<span class="dv">22</span>)]))</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="right">Start_year</th>
<th align="left">Region_alt</th>
<th align="right">Trend</th>
<th align="right">Percent_Change</th>
<th align="right">prob_decrease_30_percent</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">2004</td>
<td align="left">Continental</td>
<td align="right">-0.798</td>
<td align="right">-11.32</td>
<td align="right">0.000</td>
</tr>
<tr class="even">
<td align="right">2004</td>
<td align="left">Canada</td>
<td align="right">0.182</td>
<td align="right">2.77</td>
<td align="right">0.000</td>
</tr>
<tr class="odd">
<td align="right">2004</td>
<td align="left">United States of America</td>
<td align="right">-0.888</td>
<td align="right">-12.52</td>
<td align="right">0.000</td>
</tr>
<tr class="even">
<td align="right">2004</td>
<td align="left">ALABAMA</td>
<td align="right">-0.260</td>
<td align="right">-3.83</td>
<td align="right">0.008</td>
</tr>
<tr class="odd">
<td align="right">2004</td>
<td align="left">ARKANSAS</td>
<td align="right">0.404</td>
<td align="right">6.23</td>
<td align="right">0.009</td>
</tr>
<tr class="even">
<td align="right">2004</td>
<td align="left">CONNECTICUT</td>
<td align="right">-1.774</td>
<td align="right">-23.54</td>
<td align="right">0.344</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="ModelRun.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="GraphMap.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["bbsBayes_Workshop.pdf", "bbsBayes_Workshop.epub"],
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
